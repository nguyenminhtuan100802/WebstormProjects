<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <style>
    .label_add_product{
      background-color: powderblue;
      height: fit-content;
      padding: 10px;
    }
    .input_product_name{
      height: 20px;
    }
    .display_list_product{
      margin-top: 20px;
    }
    .display_list_product{
      border-collapse: collapse;
    }
    td{
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <label class="label_add_product">
    <input class="input_product_name" type="text" placeholder="New Product">
    <button class="button_add_product">Add</button>
    <button class="button_save_change_product">Save change</button>
  </label>

  <table class="display_list_product">
  </table>

<script>
  let inputProductName = document.querySelector(".input_product_name");
  let buttonAddProduct = document.querySelector(".button_add_product");
  let displayListProduct = document.querySelector(".display_list_product");
  let buttonSaveChangeProduct = document.querySelector(".button_save_change_product");
  let indexForSaveChange;
  let productName = [];
  let newRow;
  let newCellName;
  let newCellEdit;
  let newButtonEdit;
  let newCellDelete;
  let newButtonDelete;

  buttonAddProduct.addEventListener("click", function () {
    if (inputProductName.value !== ""){
      clearDisplay();
      productName.push(inputProductName.value);
      displayProducts();
    }
  });
  buttonSaveChangeProduct.addEventListener("click", function () {
    if (inputProductName.value !== "") {
      productName[indexForSaveChange] = inputProductName.value;
      clearDisplay();
      displayProducts();
    }
  });

  function displayProducts(){
    inputProductName.value = "";
    console.log(productName);
    for (let i = 0; i < productName.length; i++) {
      // khởi tạo hàng, từng hàng có cột name, cột nút edit, cột nút delete
      createCellName(i);
      createCellEdit(i);
      createCellDelete(i);
      createNewRow(i);
    }
  }
  function clearDisplay(){
    if (productName.length === 0){
    }
    else {
      for (let i = 0; i < productName.length; i++) {
        displayListProduct.removeChild(document.querySelector("tr"))
      }
    }
  }

  function createCellName(indexProductName){
    newCellName = document.createElement("td");
    newCellName.innerHTML = productName[indexProductName];
  }
  function createCellEdit(indexProductName){
    newCellEdit = document.createElement("td");
    newButtonEdit = document.createElement("button");

    newButtonEdit.innerHTML = "Edit";
    newButtonEdit.addEventListener("click", function () {
      inputProductName.value = productName[indexProductName];
      indexForSaveChange = indexProductName;
    });
    newCellEdit.appendChild(newButtonEdit);
  }
  function createCellDelete(indexProductName){
    newCellDelete = document.createElement("td");
    newButtonDelete = document.createElement("button");

    newButtonDelete.innerHTML = "Delete";
    newButtonDelete.addEventListener("click", function () {
      displayListProduct.removeChild(newRow);
      let productNameIndex = productName.indexOf(productName[indexProductName]);
      productName.splice(productNameIndex, 1);
      console.log(productName);
    });
    newCellDelete.appendChild(newButtonDelete);
  }
  function createNewRow(){
    newRow = document.createElement("tr");

    newRow.appendChild(newCellName);
    newRow.appendChild(newCellEdit);
    newRow.appendChild(newCellDelete);

    displayListProduct.appendChild(newRow);
  }
</script>
</body>
</html>